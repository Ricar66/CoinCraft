<Window x:Class="CoinCraft.App.Views.ImportWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Importar Lançamentos (CSV)" Height="600" Width="980" WindowStartupLocation="CenterOwner">
    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="8" VerticalAlignment="Center">
            <Button Content="Selecionar arquivo..." Width="160" Click="OnSelectFile" Margin="0,0,8,0"/>
            <TextBlock x:Name="FilePathText" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <Separator Width="16"/>
            <TextBlock Text="Conta padrão:" VerticalAlignment="Center" Margin="8,0,8,0"/>
            <ComboBox x:Name="DefaultAccountCombo" Width="180" DisplayMemberPath="Nome" SelectedValuePath="Id" Margin="0,0,8,0"/>
            <TextBlock Text="Categoria padrão:" VerticalAlignment="Center" Margin="8,0,8,0"/>
            <ComboBox x:Name="DefaultCategoryCombo" Width="180" DisplayMemberPath="Nome" SelectedValuePath="Id" Margin="0,0,8,0"/>
            <TextBlock Text="Tipo padrão:" VerticalAlignment="Center" Margin="8,0,8,0"/>
            <ComboBox x:Name="DefaultTipoCombo" Width="150" Margin="0,0,8,0"/>
            <Button Content="Importar" Width="120" Click="OnImportClick"/>
        </StackPanel>

        <Grid Margin="8">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock x:Name="StatusText" Grid.Row="0" Margin="0,0,0,8"/>

            <!-- Mapeamento de colunas (visível apenas para CSV) -->
            <GroupBox Header="Mapeamento de colunas (CSV)" Grid.Row="1" Margin="0,0,0,8" x:Name="MappingGroup" Visibility="Collapsed">
                <StackPanel Orientation="Horizontal" Margin="8">
                    <StackPanel Margin="0,0,16,0">
                        <TextBlock Text="Data"/>
                        <ComboBox x:Name="MapDataCombo" Width="160"/>
                    </StackPanel>
                    <StackPanel Margin="0,0,16,0">
                        <TextBlock Text="Descrição"/>
                        <ComboBox x:Name="MapDescricaoCombo" Width="200"/>
                    </StackPanel>
                    <StackPanel Margin="0,0,16,0">
                        <TextBlock Text="Valor"/>
                        <ComboBox x:Name="MapValorCombo" Width="120"/>
                    </StackPanel>
                    <StackPanel Margin="0,0,16,0">
                        <TextBlock Text="Tipo"/>
                        <ComboBox x:Name="MapTipoCombo" Width="140"/>
                    </StackPanel>
                    <StackPanel Margin="0,0,16,0">
                        <TextBlock Text="Conta"/>
                        <ComboBox x:Name="MapContaCombo" Width="180"/>
                    </StackPanel>
                    <StackPanel>
                        <TextBlock Text="Categoria"/>
                        <ComboBox x:Name="MapCategoriaCombo" Width="180"/>
                    </StackPanel>
                    <Button Content="Aplicar mapeamento" Margin="16,18,0,0" Width="160" Click="OnApplyMappingClick"/>
                </StackPanel>
            </GroupBox>

            <DataGrid Grid.Row="2" x:Name="PreviewGrid" AutoGenerateColumns="False" CanUserAddRows="False" IsReadOnly="True">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Data" Binding="{Binding Data}" Width="120"/>
                    <DataGridTextColumn Header="Descrição" Binding="{Binding Descricao}" Width="*"/>
                    <DataGridTextColumn Header="Valor" Binding="{Binding Valor}" Width="120"/>
                    <DataGridTextColumn Header="Tipo" Binding="{Binding Tipo}" Width="140"/>
                    <DataGridTextColumn Header="Conta" Binding="{Binding AccountName}" Width="180"/>
                    <DataGridTextColumn Header="Categoria" Binding="{Binding CategoryName}" Width="180"/>
                </DataGrid.Columns>
            </DataGrid>

            <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
                <Button Content="Fechar" Width="100" Click="OnCloseClick"/>
            </StackPanel>
        </Grid>
    </DockPanel>
</Window>